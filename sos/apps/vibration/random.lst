   1               		.file	"random.c"
   2               		.arch atmega128
   3               	__SREG__ = 0x3f
   4               	__SP_H__ = 0x3e
   5               	__SP_L__ = 0x3d
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  12               		.text
  13               	.Ltext0:
 209               	.global	random_init
 211               	random_init:
   1:/Users/Administrator/sos-2x/kernel/random.c **** #include <sos.h>
   2:/Users/Administrator/sos-2x/kernel/random.c **** #include <sos_info.h>
   3:/Users/Administrator/sos-2x/kernel/random.c **** #include <random.h>
   4:/Users/Administrator/sos-2x/kernel/random.c **** 
   5:/Users/Administrator/sos-2x/kernel/random.c **** typedef struct {
   6:/Users/Administrator/sos-2x/kernel/random.c ****     uint16_t shiftReg;
   7:/Users/Administrator/sos-2x/kernel/random.c ****     uint16_t initSeed;
   8:/Users/Administrator/sos-2x/kernel/random.c ****     uint16_t mask;
   9:/Users/Administrator/sos-2x/kernel/random.c **** } RandomState;
  10:/Users/Administrator/sos-2x/kernel/random.c **** 
  11:/Users/Administrator/sos-2x/kernel/random.c **** static RandomState randomst;
  12:/Users/Administrator/sos-2x/kernel/random.c **** 
  13:/Users/Administrator/sos-2x/kernel/random.c **** void random_init(){
 213               	.LM1:
 214               	/* prologue: frame size=0 */
 215               	/* prologue end (size=0) */
  14:/Users/Administrator/sos-2x/kernel/random.c ****     HAS_CRITICAL_SECTION;
  15:/Users/Administrator/sos-2x/kernel/random.c ****     ENTER_CRITICAL_SECTION();
 217               	.LM2:
 218               	/* #APP */
 219 0000 4FB7      		in r20, __SREG__
 220 0002 F894      		cli
 221               		
  16:/Users/Administrator/sos-2x/kernel/random.c ****     randomst.shiftReg = (uint16_t)(119 * 119 * (node_address + 1));
 223               	.LM3:
 224               	/* #NOAPP */
 225 0004 2091 0000 		lds r18,node_address
 226 0008 3091 0000 		lds r19,(node_address)+1
 227 000c 81E5      		ldi r24,lo8(14161)
 228 000e 97E3      		ldi r25,hi8(14161)
 229 0010 289F      		mul r18,r24
 230 0012 B001      		movw r22,r0
 231 0014 299F      		mul r18,r25
 232 0016 700D      		add r23,r0
 233 0018 389F      		mul r19,r24
 234 001a 700D      		add r23,r0
 235 001c 1124      		clr r1
 236 001e CB01      		movw r24,r22
 237 0020 8F5A      		subi r24,lo8(-(14161))
 238 0022 984C      		sbci r25,hi8(-(14161))
 239 0024 9093 0000 		sts (randomst)+1,r25
 240 0028 8093 0000 		sts randomst,r24
  17:/Users/Administrator/sos-2x/kernel/random.c ****     randomst.initSeed = randomst.shiftReg;
 242               	.LM4:
 243 002c 9093 0000 		sts (randomst+2)+1,r25
 244 0030 8093 0000 		sts randomst+2,r24
  18:/Users/Administrator/sos-2x/kernel/random.c ****     randomst.mask = (uint16_t)(137 * 29 * (node_address + 1));
 246               	.LM5:
 247 0034 85E8      		ldi r24,lo8(3973)
 248 0036 9FE0      		ldi r25,hi8(3973)
 249 0038 289F      		mul r18,r24
 250 003a B001      		movw r22,r0
 251 003c 299F      		mul r18,r25
 252 003e 700D      		add r23,r0
 253 0040 389F      		mul r19,r24
 254 0042 700D      		add r23,r0
 255 0044 1124      		clr r1
 256 0046 CB01      		movw r24,r22
 257 0048 8B57      		subi r24,lo8(-(3973))
 258 004a 904F      		sbci r25,hi8(-(3973))
 259 004c 9093 0000 		sts (randomst+4)+1,r25
 260 0050 8093 0000 		sts randomst+4,r24
  19:/Users/Administrator/sos-2x/kernel/random.c ****     LEAVE_CRITICAL_SECTION();
 262               	.LM6:
 263               	/* #APP */
 264 0054 4FBF      		out __SREG__, r20
 265               		
 266               	/* #NOAPP */
 267               	/* epilogue: frame size=0 */
 268 0056 0895      		ret
 269               	/* epilogue end (size=1) */
 270               	/* function random_init size 51 (50) */
 275               	.Lscope0:
 278               	.global	ker_rand
 280               	ker_rand:
  20:/Users/Administrator/sos-2x/kernel/random.c **** }
  21:/Users/Administrator/sos-2x/kernel/random.c **** 
  22:/Users/Administrator/sos-2x/kernel/random.c **** uint16_t ker_rand() {
 282               	.LM7:
 283               	/* prologue: frame size=0 */
 284               	/* prologue end (size=0) */
  23:/Users/Administrator/sos-2x/kernel/random.c ****     HAS_CRITICAL_SECTION;
  24:/Users/Administrator/sos-2x/kernel/random.c ****     bool endbit;
  25:/Users/Administrator/sos-2x/kernel/random.c ****     uint16_t tmpShiftReg;
  26:/Users/Administrator/sos-2x/kernel/random.c **** 
  27:/Users/Administrator/sos-2x/kernel/random.c ****     ENTER_CRITICAL_SECTION();
 286               	.LM8:
 287               	/* #APP */
 288 0058 8FB7      		in r24, __SREG__
 289 005a F894      		cli
 290               		
  28:/Users/Administrator/sos-2x/kernel/random.c ****     tmpShiftReg = randomst.shiftReg;
 292               	.LM9:
 293               	/* #NOAPP */
 294 005c 2091 0000 		lds r18,randomst
 295 0060 3091 0000 		lds r19,(randomst)+1
  29:/Users/Administrator/sos-2x/kernel/random.c ****     LEAVE_CRITICAL_SECTION();
 297               	.LM10:
 298               	/* #APP */
 299 0064 8FBF      		out __SREG__, r24
 300               		
  30:/Users/Administrator/sos-2x/kernel/random.c ****     endbit = ((tmpShiftReg & 0x8000) != 0)?true:false;
 302               	.LM11:
 303               	/* #NOAPP */
 304 0066 832F      		mov r24,r19
 305 0068 881F      		rol r24
 306 006a 8827      		clr r24
 307 006c 881F      		rol r24
  31:/Users/Administrator/sos-2x/kernel/random.c ****     tmpShiftReg <<= 1;
 309               	.LM12:
 310 006e 220F      		lsl r18
 311 0070 331F      		rol r19
  32:/Users/Administrator/sos-2x/kernel/random.c ****     if (endbit)
 313               	.LM13:
 314 0072 8823      		tst r24
 315 0074 21F0      		breq .L4
  33:/Users/Administrator/sos-2x/kernel/random.c ****         tmpShiftReg ^= 0x100b;
 317               	.LM14:
 318 0076 8BE0      		ldi r24,lo8(4107)
 319 0078 90E1      		ldi r25,hi8(4107)
 320 007a 2827      		eor r18,r24
 321 007c 3927      		eor r19,r25
 322               	.L4:
  34:/Users/Administrator/sos-2x/kernel/random.c ****     tmpShiftReg++;
 324               	.LM15:
 325 007e 2F5F      		subi r18,lo8(-(1))
 326 0080 3F4F      		sbci r19,hi8(-(1))
  35:/Users/Administrator/sos-2x/kernel/random.c ****     ENTER_CRITICAL_SECTION();
 328               	.LM16:
 329               	/* #APP */
 330 0082 8FB7      		in r24, __SREG__
 331 0084 F894      		cli
 332               		
  36:/Users/Administrator/sos-2x/kernel/random.c ****     randomst.shiftReg = tmpShiftReg;
 334               	.LM17:
 335               	/* #NOAPP */
 336 0086 3093 0000 		sts (randomst)+1,r19
 337 008a 2093 0000 		sts randomst,r18
  37:/Users/Administrator/sos-2x/kernel/random.c ****     LEAVE_CRITICAL_SECTION();
 339               	.LM18:
 340               	/* #APP */
 341 008e 8FBF      		out __SREG__, r24
 342               		
  38:/Users/Administrator/sos-2x/kernel/random.c ****     tmpShiftReg = tmpShiftReg ^ randomst.mask;
 344               	.LM19:
 345               	/* #NOAPP */
 346 0090 8091 0000 		lds r24,randomst+4
 347 0094 9091 0000 		lds r25,(randomst+4)+1
  39:/Users/Administrator/sos-2x/kernel/random.c ****     return tmpShiftReg;
  40:/Users/Administrator/sos-2x/kernel/random.c **** }
 349               	.LM20:
 350 0098 8227      		eor r24,r18
 351 009a 9327      		eor r25,r19
 352               	/* epilogue: frame size=0 */
 353 009c 0895      		ret
 354               	/* epilogue end (size=1) */
 355               	/* function ker_rand size 49 (48) */
 362               	.Lscope1:
 364               		.lcomm randomst,6
 366               		.text
 368               	Letext:
 369               	/* File "/Users/Administrator/sos-2x/kernel/random.c": code  100 = 0x0064 (  98), prologues   0, ep
DEFINED SYMBOLS
                            *ABS*:00000000 random.c
                            *ABS*:0000003f __SREG__
                            *ABS*:0000003e __SP_H__
                            *ABS*:0000003d __SP_L__
                            *ABS*:00000000 __tmp_reg__
                            *ABS*:00000001 __zero_reg__
/var/tmp//ccbEoG6O.s:211    .text:00000000 random_init
                             .bss:00000000 randomst
/var/tmp//ccbEoG6O.s:280    .text:00000058 ker_rand
/var/tmp//ccbEoG6O.s:368    .text:0000009e Letext

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
node_address
