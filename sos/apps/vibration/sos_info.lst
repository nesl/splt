   1               		.file	"sos_info.c"
   2               		.arch atmega128
   3               	__SREG__ = 0x3f
   4               	__SP_H__ = 0x3e
   5               	__SP_L__ = 0x3d
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  12               		.text
  13               	.Ltext0:
 211               	.global	hw_type
 212               		.data
 215               	hw_type:
 216 0000 02        		.byte	2
 217               	.global	node_group_id
 218               	.global	node_group_id
 219               		.section .bss
 222               	node_group_id:
 223 0000 00        		.skip 1,0
 224               	.global	node_address
 225               		.data
 228               	node_address:
 229 0001 0200      		.word	2
 230               	.global	gps_loc
 233               	gps_loc:
 234 0003 02        		.byte	2
 235 0004 00        		.byte	0
 236 0005 00        		.byte	0
 237 0006 00        		.byte	0
 238 0007 00        		.byte	0
 239 0008 00        		.byte	0
 240 0009 00        		.byte	0
 241 000a 00        		.byte	0
 242 000b 0400      		.word	4
 243 000d 0000      		.word	0
 244               	.global	node_loc
 247               	node_loc:
 248 000f 0400      		.word	4
 249 0011 0000      		.word	0
 250 0013 0000      		.word	0
 251 0015 0000      		.word	0
 252               		.text
 254               	.global	id_init
 256               	id_init:
   1:/Users/Administrator/sos-2x/kernel/sos_info.c **** /**
   2:/Users/Administrator/sos-2x/kernel/sos_info.c ****  * @brief    node id
   3:/Users/Administrator/sos-2x/kernel/sos_info.c ****  * @author   Simon Han (simonhan@ee.ucla.edu)
   4:/Users/Administrator/sos-2x/kernel/sos_info.c ****  * @version  1.0
   5:/Users/Administrator/sos-2x/kernel/sos_info.c ****  * This is the interface for modules, kernel can
   6:/Users/Administrator/sos-2x/kernel/sos_info.c ****  * just use node_address
   7:/Users/Administrator/sos-2x/kernel/sos_info.c ****  * 9/13/2005 mods made by Nicholas Kottenstette (nkottens@nd.edu)
   8:/Users/Administrator/sos-2x/kernel/sos_info.c ****  *   changed ker_loc to return copy of node_loc, changed node_loc.{x,y,z}
   9:/Users/Administrator/sos-2x/kernel/sos_info.c ****  *   to be int16_t, added gps_loc data, ker_gps interface, and
  10:/Users/Administrator/sos-2x/kernel/sos_info.c ****  *   ker_loc_r2 interface.
  11:/Users/Administrator/sos-2x/kernel/sos_info.c ****  */
  12:/Users/Administrator/sos-2x/kernel/sos_info.c **** #include <sos_info.h>
  13:/Users/Administrator/sos-2x/kernel/sos_info.c **** #include <sos.h>
  14:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
  15:/Users/Administrator/sos-2x/kernel/sos_info.c **** node_loc_t node_loc = {
  16:/Users/Administrator/sos-2x/kernel/sos_info.c **** #ifdef NODE_LOC_UNIT
  17:/Users/Administrator/sos-2x/kernel/sos_info.c ****     .unit = NODE_LOC_UNIT,
  18:/Users/Administrator/sos-2x/kernel/sos_info.c **** #else
  19:/Users/Administrator/sos-2x/kernel/sos_info.c ****     .unit = UNIT_FEET,
  20:/Users/Administrator/sos-2x/kernel/sos_info.c **** #endif
  21:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
  22:/Users/Administrator/sos-2x/kernel/sos_info.c **** #ifdef NODE_X
  23:/Users/Administrator/sos-2x/kernel/sos_info.c ****     .x = NODE_X,
  24:/Users/Administrator/sos-2x/kernel/sos_info.c **** #else
  25:/Users/Administrator/sos-2x/kernel/sos_info.c ****     .x = 0,
  26:/Users/Administrator/sos-2x/kernel/sos_info.c **** #endif
  27:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
  28:/Users/Administrator/sos-2x/kernel/sos_info.c **** #ifdef NODE_Y
  29:/Users/Administrator/sos-2x/kernel/sos_info.c ****     .y = NODE_Y,
  30:/Users/Administrator/sos-2x/kernel/sos_info.c **** #else
  31:/Users/Administrator/sos-2x/kernel/sos_info.c ****     .y = 0,
  32:/Users/Administrator/sos-2x/kernel/sos_info.c **** #endif
  33:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
  34:/Users/Administrator/sos-2x/kernel/sos_info.c **** #ifdef NODE_Z
  35:/Users/Administrator/sos-2x/kernel/sos_info.c ****     .z = NODE_Z,
  36:/Users/Administrator/sos-2x/kernel/sos_info.c **** #else
  37:/Users/Administrator/sos-2x/kernel/sos_info.c ****     .z = 0,
  38:/Users/Administrator/sos-2x/kernel/sos_info.c **** #endif
  39:/Users/Administrator/sos-2x/kernel/sos_info.c **** };
  40:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
  41:/Users/Administrator/sos-2x/kernel/sos_info.c **** #ifndef NODE_GPS_X_DIR
  42:/Users/Administrator/sos-2x/kernel/sos_info.c **** #define NODE_GPS_X_DIR WEST
  43:/Users/Administrator/sos-2x/kernel/sos_info.c **** #endif
  44:/Users/Administrator/sos-2x/kernel/sos_info.c **** #ifndef NODE_GPS_X_DEG
  45:/Users/Administrator/sos-2x/kernel/sos_info.c **** #define NODE_GPS_X_DEG 0
  46:/Users/Administrator/sos-2x/kernel/sos_info.c **** #endif
  47:/Users/Administrator/sos-2x/kernel/sos_info.c **** #ifndef NODE_GPS_X_MIN
  48:/Users/Administrator/sos-2x/kernel/sos_info.c **** #define NODE_GPS_X_MIN 0
  49:/Users/Administrator/sos-2x/kernel/sos_info.c **** #endif
  50:/Users/Administrator/sos-2x/kernel/sos_info.c **** #ifndef NODE_GPS_X_SEC
  51:/Users/Administrator/sos-2x/kernel/sos_info.c **** #define NODE_GPS_X_SEC 0
  52:/Users/Administrator/sos-2x/kernel/sos_info.c **** #endif
  53:/Users/Administrator/sos-2x/kernel/sos_info.c **** #ifndef NODE_GPS_Y_DIR
  54:/Users/Administrator/sos-2x/kernel/sos_info.c **** #define NODE_GPS_Y_DIR NORTH
  55:/Users/Administrator/sos-2x/kernel/sos_info.c **** #endif
  56:/Users/Administrator/sos-2x/kernel/sos_info.c **** #ifndef NODE_GPS_Y_DEG
  57:/Users/Administrator/sos-2x/kernel/sos_info.c **** #define NODE_GPS_Y_DEG 0
  58:/Users/Administrator/sos-2x/kernel/sos_info.c **** #endif
  59:/Users/Administrator/sos-2x/kernel/sos_info.c **** #ifndef NODE_GPS_Y_MIN
  60:/Users/Administrator/sos-2x/kernel/sos_info.c **** #define NODE_GPS_Y_MIN 0
  61:/Users/Administrator/sos-2x/kernel/sos_info.c **** #endif
  62:/Users/Administrator/sos-2x/kernel/sos_info.c **** #ifndef NODE_GPS_Y_SEC
  63:/Users/Administrator/sos-2x/kernel/sos_info.c **** #define NODE_GPS_Y_SEC 0
  64:/Users/Administrator/sos-2x/kernel/sos_info.c **** #endif
  65:/Users/Administrator/sos-2x/kernel/sos_info.c **** #ifndef NODE_GPS_Z_UNIT
  66:/Users/Administrator/sos-2x/kernel/sos_info.c **** #define NODE_GPS_Z_UNIT UNIT_FEET
  67:/Users/Administrator/sos-2x/kernel/sos_info.c **** #endif
  68:/Users/Administrator/sos-2x/kernel/sos_info.c **** #ifndef NODE_GPS_Z
  69:/Users/Administrator/sos-2x/kernel/sos_info.c **** #define NODE_GPS_Z 0
  70:/Users/Administrator/sos-2x/kernel/sos_info.c **** #endif
  71:/Users/Administrator/sos-2x/kernel/sos_info.c **** gps_t gps_loc = {
  72:/Users/Administrator/sos-2x/kernel/sos_info.c ****     .x    = { NODE_GPS_X_DIR, NODE_GPS_X_DEG, NODE_GPS_X_MIN, NODE_GPS_X_SEC },
  73:/Users/Administrator/sos-2x/kernel/sos_info.c ****     .y     = { NODE_GPS_Y_DIR, NODE_GPS_Y_DEG, NODE_GPS_Y_MIN, NODE_GPS_Y_SEC },
  74:/Users/Administrator/sos-2x/kernel/sos_info.c ****     .unit  = NODE_GPS_Z_UNIT,
  75:/Users/Administrator/sos-2x/kernel/sos_info.c ****     .z     = NODE_GPS_Z,
  76:/Users/Administrator/sos-2x/kernel/sos_info.c **** };
  77:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
  78:/Users/Administrator/sos-2x/kernel/sos_info.c **** #ifdef NODE_ADDR
  79:/Users/Administrator/sos-2x/kernel/sos_info.c **** uint16_t node_address = NODE_ADDR;
  80:/Users/Administrator/sos-2x/kernel/sos_info.c **** #else
  81:/Users/Administrator/sos-2x/kernel/sos_info.c **** uint16_t node_address = 1;
  82:/Users/Administrator/sos-2x/kernel/sos_info.c **** #endif
  83:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
  84:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
  85:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
  86:/Users/Administrator/sos-2x/kernel/sos_info.c **** #ifdef NODE_GROUP_ID
  87:/Users/Administrator/sos-2x/kernel/sos_info.c **** uint8_t node_group_id = NODE_GROUP_ID;
  88:/Users/Administrator/sos-2x/kernel/sos_info.c **** #else
  89:/Users/Administrator/sos-2x/kernel/sos_info.c **** uint8_t node_group_id = 1;
  90:/Users/Administrator/sos-2x/kernel/sos_info.c **** #endif
  91:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
  92:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
  93:/Users/Administrator/sos-2x/kernel/sos_info.c **** #ifdef HW_TYPE
  94:/Users/Administrator/sos-2x/kernel/sos_info.c **** uint8_t hw_type = HW_TYPE;
  95:/Users/Administrator/sos-2x/kernel/sos_info.c **** #else
  96:/Users/Administrator/sos-2x/kernel/sos_info.c **** uint8_t hw_type = UNKNOWEN;
  97:/Users/Administrator/sos-2x/kernel/sos_info.c **** #endif
  98:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
  99:/Users/Administrator/sos-2x/kernel/sos_info.c **** int8_t id_init()
 100:/Users/Administrator/sos-2x/kernel/sos_info.c **** {
 258               	.LM1:
 259               	/* prologue: frame size=0 */
 260               	/* prologue end (size=0) */
 101:/Users/Administrator/sos-2x/kernel/sos_info.c ****    return SOS_OK;
 102:/Users/Administrator/sos-2x/kernel/sos_info.c **** }
 262               	.LM2:
 263 0000 80E0      		ldi r24,lo8(0)
 264 0002 90E0      		ldi r25,hi8(0)
 265               	/* epilogue: frame size=0 */
 266 0004 0895      		ret
 267               	/* epilogue end (size=1) */
 268               	/* function id_init size 3 (2) */
 270               	.Lscope0:
 274               	.global	ker_set_id
 276               	ker_set_id:
 103:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
 104:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
 105:/Users/Administrator/sos-2x/kernel/sos_info.c **** //! The following function is used by the 802.15.4 MAC to set the node address after boot-up
 106:/Users/Administrator/sos-2x/kernel/sos_info.c **** void ker_set_id(uint16_t alloc_address)
 107:/Users/Administrator/sos-2x/kernel/sos_info.c **** {
 278               	.LM3:
 279               	/* prologue: frame size=0 */
 280               	/* prologue end (size=0) */
 108:/Users/Administrator/sos-2x/kernel/sos_info.c ****     node_address = alloc_address;
 282               	.LM4:
 283 0006 9093 0000 		sts (node_address)+1,r25
 284 000a 8093 0000 		sts node_address,r24
 285               	/* epilogue: frame size=0 */
 286 000e 0895      		ret
 287               	/* epilogue end (size=1) */
 288               	/* function ker_set_id size 5 (4) */
 290               	.Lscope1:
 293               	.global	ker_id
 295               	ker_id:
 109:/Users/Administrator/sos-2x/kernel/sos_info.c **** }
 110:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
 111:/Users/Administrator/sos-2x/kernel/sos_info.c **** uint16_t ker_id()
 112:/Users/Administrator/sos-2x/kernel/sos_info.c **** {
 297               	.LM5:
 298               	/* prologue: frame size=0 */
 299               	/* prologue end (size=0) */
 113:/Users/Administrator/sos-2x/kernel/sos_info.c ****     return node_address;
 114:/Users/Administrator/sos-2x/kernel/sos_info.c **** }
 301               	.LM6:
 302 0010 8091 0000 		lds r24,node_address
 303 0014 9091 0000 		lds r25,(node_address)+1
 304               	/* epilogue: frame size=0 */
 305 0018 0895      		ret
 306               	/* epilogue end (size=1) */
 307               	/* function ker_id size 5 (4) */
 309               	.Lscope2:
 312               	.global	ker_loc
 314               	ker_loc:
 115:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
 116:/Users/Administrator/sos-2x/kernel/sos_info.c **** node_loc_t ker_loc()
 117:/Users/Administrator/sos-2x/kernel/sos_info.c **** {
 316               	.LM7:
 317               	/* prologue: frame size=0 */
 318 001a AF92      		push r10
 319 001c BF92      		push r11
 320 001e CF92      		push r12
 321 0020 DF92      		push r13
 322 0022 EF92      		push r14
 323 0024 FF92      		push r15
 324 0026 0F93      		push r16
 325 0028 1F93      		push r17
 326               	/* prologue end (size=8) */
 118:/Users/Administrator/sos-2x/kernel/sos_info.c ****     return node_loc;
 328               	.LM8:
 329 002a E091 0000 		lds r30,node_loc+7
 330 002e 2091 0000 		lds r18,node_loc
 331 0032 3091 0000 		lds r19,node_loc+1
 332 0036 4091 0000 		lds r20,node_loc+2
 333 003a 5091 0000 		lds r21,node_loc+3
 334 003e 6091 0000 		lds r22,node_loc+4
 335 0042 7091 0000 		lds r23,node_loc+5
 336 0046 8091 0000 		lds r24,node_loc+6
 119:/Users/Administrator/sos-2x/kernel/sos_info.c **** }
 338               	.LM9:
 339 004a 9E2F      		mov r25,r30
 340               	/* epilogue: frame size=0 */
 341 004c 1F91      		pop r17
 342 004e 0F91      		pop r16
 343 0050 FF90      		pop r15
 344 0052 EF90      		pop r14
 345 0054 DF90      		pop r13
 346 0056 CF90      		pop r12
 347 0058 BF90      		pop r11
 348 005a AF90      		pop r10
 349 005c 0895      		ret
 350               	/* epilogue end (size=9) */
 351               	/* function ker_loc size 34 (17) */
 353               	.Lscope3:
 356               	.global	ker_gps
 358               	ker_gps:
 120:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
 121:/Users/Administrator/sos-2x/kernel/sos_info.c **** gps_t ker_gps()
 122:/Users/Administrator/sos-2x/kernel/sos_info.c **** {
 360               	.LM10:
 361               	/* prologue: frame size=0 */
 362 005e CF93      		push r28
 363 0060 DF93      		push r29
 364               	/* prologue end (size=2) */
 365 0062 FC01      		movw r30,r24
 123:/Users/Administrator/sos-2x/kernel/sos_info.c ****     return gps_loc;
 367               	.LM11:
 368 0064 8CE0      		ldi r24,lo8(12)
 369 0066 A0E0      		ldi r26,lo8(gps_loc)
 370 0068 B0E0      		ldi r27,hi8(gps_loc)
 371 006a EF01      		movw r28,r30
 372 006c 0D90      		ld __tmp_reg__,X+
 373 006e 0992      		st Y+,__tmp_reg__
 374 0070 8A95      		dec r24
 375 0072 E1F7      		brne .-8
 124:/Users/Administrator/sos-2x/kernel/sos_info.c **** }
 377               	.LM12:
 378 0074 CF01      		movw r24,r30
 379               	/* epilogue: frame size=0 */
 380 0076 DF91      		pop r29
 381 0078 CF91      		pop r28
 382 007a 0895      		ret
 383               	/* epilogue end (size=3) */
 384               	/* function ker_gps size 15 (10) */
 386               	.Lscope4:
 391               	.global	ker_loc_r2
 393               	ker_loc_r2:
 125:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
 126:/Users/Administrator/sos-2x/kernel/sos_info.c **** uint32_t ker_loc_r2(node_loc_t *loc1, node_loc_t *loc2)
 127:/Users/Administrator/sos-2x/kernel/sos_info.c **** {
 395               	.LM13:
 396               	/* prologue: frame size=0 */
 397 007c 6F92      		push r6
 398 007e 7F92      		push r7
 399 0080 8F92      		push r8
 400 0082 9F92      		push r9
 401 0084 AF92      		push r10
 402 0086 BF92      		push r11
 403 0088 CF92      		push r12
 404 008a DF92      		push r13
 405 008c EF92      		push r14
 406 008e FF92      		push r15
 407 0090 0F93      		push r16
 408 0092 1F93      		push r17
 409 0094 CF93      		push r28
 410 0096 DF93      		push r29
 411               	/* prologue end (size=14) */
 412 0098 6C01      		movw r12,r24
 128:/Users/Administrator/sos-2x/kernel/sos_info.c ****     int32_t dx=0, dy=0, dz=0;
 129:/Users/Administrator/sos-2x/kernel/sos_info.c ****     uint32_t dx2=0, dy2=0, dz2=0;
 130:/Users/Administrator/sos-2x/kernel/sos_info.c **** #define SQUARED(x) ((x)*(x))
 131:/Users/Administrator/sos-2x/kernel/sos_info.c **** #define DXYZ_MAX ((int16_t)1<<14)
 132:/Users/Administrator/sos-2x/kernel/sos_info.c **** #define DXYZ_MIN -DXYZ_MAX
 133:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
 134:/Users/Administrator/sos-2x/kernel/sos_info.c **** #ifndef MAX
 135:/Users/Administrator/sos-2x/kernel/sos_info.c **** #define MAX(a,b) ( ((a) > (b)) ? (a) : (b) )
 136:/Users/Administrator/sos-2x/kernel/sos_info.c **** #endif
 137:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
 138:/Users/Administrator/sos-2x/kernel/sos_info.c **** #ifndef MIN
 139:/Users/Administrator/sos-2x/kernel/sos_info.c **** #define MIN(a,b) ( ((a) < (b)) ? (a) : (b) )
 140:/Users/Administrator/sos-2x/kernel/sos_info.c **** #endif
 141:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
 142:/Users/Administrator/sos-2x/kernel/sos_info.c ****     if (loc1->unit != loc2->unit)
 414               	.LM14:
 415 009a DC01      		movw r26,r24
 416 009c 2D91      		ld r18,X+
 417 009e 3C91      		ld r19,X
 418 00a0 EB01      		movw r28,r22
 419 00a2 8881      		ld r24,Y
 420 00a4 9981      		ldd r25,Y+1
 421 00a6 2817      		cp r18,r24
 422 00a8 3907      		cpc r19,r25
 423 00aa 49F0      		breq .L7
 143:/Users/Administrator/sos-2x/kernel/sos_info.c ****         return 0xffffffff;
 425               	.LM15:
 426 00ac 4FEF      		ldi r20,lo8(-1)
 427 00ae 642E      		mov r6,r20
 428 00b0 4FEF      		ldi r20,hi8(-1)
 429 00b2 742E      		mov r7,r20
 430 00b4 4FEF      		ldi r20,hlo8(-1)
 431 00b6 842E      		mov r8,r20
 432 00b8 4FEF      		ldi r20,hhi8(-1)
 433 00ba 942E      		mov r9,r20
 434 00bc 9AC0      		rjmp .L6
 435               	.L7:
 144:/Users/Administrator/sos-2x/kernel/sos_info.c ****     /* Limit the largest dimension to +/- 16384 to prevent overflow */
 145:/Users/Administrator/sos-2x/kernel/sos_info.c ****     dx = loc1->x - loc2->x;
 437               	.LM16:
 438 00be F601      		movw r30,r12
 439 00c0 8281      		ldd r24,Z+2
 440 00c2 9381      		ldd r25,Z+3
 441 00c4 EB01      		movw r28,r22
 442 00c6 2A81      		ldd r18,Y+2
 443 00c8 3B81      		ldd r19,Y+3
 444 00ca 821B      		sub r24,r18
 445 00cc 930B      		sbc r25,r19
 446 00ce DC01      		movw r26,r24
 447 00d0 CC27      		clr r28
 448 00d2 B7FD      		sbrc r27,7
 449 00d4 C095      		com r28
 450 00d6 DC2F      		mov r29,r28
 146:/Users/Administrator/sos-2x/kernel/sos_info.c ****     dy = loc1->y - loc2->y;
 452               	.LM17:
 453 00d8 8481      		ldd r24,Z+4
 454 00da 9581      		ldd r25,Z+5
 455 00dc FB01      		movw r30,r22
 456 00de 2481      		ldd r18,Z+4
 457 00e0 3581      		ldd r19,Z+5
 458 00e2 821B      		sub r24,r18
 459 00e4 930B      		sbc r25,r19
 460 00e6 7C01      		movw r14,r24
 461 00e8 0027      		clr r16
 462 00ea F7FC      		sbrc r15,7
 463 00ec 0095      		com r16
 464 00ee 102F      		mov r17,r16
 147:/Users/Administrator/sos-2x/kernel/sos_info.c ****     dz = loc1->z - loc2->z;
 466               	.LM18:
 467 00f0 F601      		movw r30,r12
 468 00f2 8681      		ldd r24,Z+6
 469 00f4 9781      		ldd r25,Z+7
 470 00f6 FB01      		movw r30,r22
 471 00f8 2681      		ldd r18,Z+6
 472 00fa 3781      		ldd r19,Z+7
 473 00fc 821B      		sub r24,r18
 474 00fe 930B      		sbc r25,r19
 475 0100 5C01      		movw r10,r24
 476 0102 CC24      		clr r12
 477 0104 B7FC      		sbrc r11,7
 478 0106 C094      		com r12
 479 0108 DC2C      		mov r13,r12
 148:/Users/Administrator/sos-2x/kernel/sos_info.c ****     dx = MAX(dx,DXYZ_MIN);
 481               	.LM19:
 482 010a A030      		cpi r26,lo8(-16384)
 483 010c F0EC      		ldi r31,hi8(-16384)
 484 010e BF07      		cpc r27,r31
 485 0110 FFEF      		ldi r31,hlo8(-16384)
 486 0112 CF07      		cpc r28,r31
 487 0114 FFEF      		ldi r31,hhi8(-16384)
 488 0116 DF07      		cpc r29,r31
 489 0118 24F4      		brge .L8
 490 011a A0E0      		ldi r26,lo8(-16384)
 491 011c B0EC      		ldi r27,hi8(-16384)
 492 011e CFEF      		ldi r28,hlo8(-16384)
 493 0120 DFEF      		ldi r29,hhi8(-16384)
 494               	.L8:
 149:/Users/Administrator/sos-2x/kernel/sos_info.c ****     dy = MAX(dy,DXYZ_MIN);
 496               	.LM20:
 497 0122 80E0      		ldi r24,lo8(-16384)
 498 0124 E816      		cp r14,r24
 499 0126 80EC      		ldi r24,hi8(-16384)
 500 0128 F806      		cpc r15,r24
 501 012a 8FEF      		ldi r24,hlo8(-16384)
 502 012c 0807      		cpc r16,r24
 503 012e 8FEF      		ldi r24,hhi8(-16384)
 504 0130 1807      		cpc r17,r24
 505 0132 3CF4      		brge .L9
 506 0134 E12C      		mov r14,__zero_reg__
 507 0136 30EC      		ldi r19,hi8(-16384)
 508 0138 F32E      		mov r15,r19
 509 013a 3FEF      		ldi r19,hlo8(-16384)
 510 013c 032F      		mov r16,r19
 511 013e 3FEF      		ldi r19,hhi8(-16384)
 512 0140 132F      		mov r17,r19
 513               	.L9:
 150:/Users/Administrator/sos-2x/kernel/sos_info.c ****     dz = MAX(dz,DXYZ_MIN);
 515               	.LM21:
 516 0142 E0E0      		ldi r30,lo8(-16384)
 517 0144 AE16      		cp r10,r30
 518 0146 E0EC      		ldi r30,hi8(-16384)
 519 0148 BE06      		cpc r11,r30
 520 014a EFEF      		ldi r30,hlo8(-16384)
 521 014c CE06      		cpc r12,r30
 522 014e EFEF      		ldi r30,hhi8(-16384)
 523 0150 DE06      		cpc r13,r30
 524 0152 3CF4      		brge .L10
 525 0154 A12C      		mov r10,__zero_reg__
 526 0156 20EC      		ldi r18,hi8(-16384)
 527 0158 B22E      		mov r11,r18
 528 015a 2FEF      		ldi r18,hlo8(-16384)
 529 015c C22E      		mov r12,r18
 530 015e 2FEF      		ldi r18,hhi8(-16384)
 531 0160 D22E      		mov r13,r18
 532               	.L10:
 151:/Users/Administrator/sos-2x/kernel/sos_info.c ****     dx = MIN(dx,DXYZ_MAX);
 534               	.LM22:
 535 0162 A130      		cpi r26,lo8(16385)
 536 0164 F0E4      		ldi r31,hi8(16385)
 537 0166 BF07      		cpc r27,r31
 538 0168 F0E0      		ldi r31,hlo8(16385)
 539 016a CF07      		cpc r28,r31
 540 016c F0E0      		ldi r31,hhi8(16385)
 541 016e DF07      		cpc r29,r31
 542 0170 24F0      		brlt .L11
 543 0172 A0E0      		ldi r26,lo8(16384)
 544 0174 B0E4      		ldi r27,hi8(16384)
 545 0176 C0E0      		ldi r28,hlo8(16384)
 546 0178 D0E0      		ldi r29,hhi8(16384)
 547               	.L11:
 152:/Users/Administrator/sos-2x/kernel/sos_info.c ****     dy = MIN(dy,DXYZ_MAX);
 549               	.LM23:
 550 017a 81E0      		ldi r24,lo8(16385)
 551 017c E816      		cp r14,r24
 552 017e 80E4      		ldi r24,hi8(16385)
 553 0180 F806      		cpc r15,r24
 554 0182 80E0      		ldi r24,hlo8(16385)
 555 0184 0807      		cpc r16,r24
 556 0186 80E0      		ldi r24,hhi8(16385)
 557 0188 1807      		cpc r17,r24
 558 018a 2CF0      		brlt .L12
 559 018c E12C      		mov r14,__zero_reg__
 560 018e 90E4      		ldi r25,hi8(16384)
 561 0190 F92E      		mov r15,r25
 562 0192 012D      		mov r16,__zero_reg__
 563 0194 112D      		mov r17,__zero_reg__
 564               	.L12:
 153:/Users/Administrator/sos-2x/kernel/sos_info.c ****     dz = MIN(dz,DXYZ_MAX);
 566               	.LM24:
 567 0196 E1E0      		ldi r30,lo8(16385)
 568 0198 AE16      		cp r10,r30
 569 019a E0E4      		ldi r30,hi8(16385)
 570 019c BE06      		cpc r11,r30
 571 019e E0E0      		ldi r30,hlo8(16385)
 572 01a0 CE06      		cpc r12,r30
 573 01a2 E0E0      		ldi r30,hhi8(16385)
 574 01a4 DE06      		cpc r13,r30
 575 01a6 2CF0      		brlt .L13
 576 01a8 A12C      		mov r10,__zero_reg__
 577 01aa 80E4      		ldi r24,hi8(16384)
 578 01ac B82E      		mov r11,r24
 579 01ae C12C      		mov r12,__zero_reg__
 580 01b0 D12C      		mov r13,__zero_reg__
 581               	.L13:
 154:/Users/Administrator/sos-2x/kernel/sos_info.c ****     dx2 = SQUARED(dx);
 583               	.LM25:
 584 01b2 BD01      		movw r22,r26
 585 01b4 CE01      		movw r24,r28
 586 01b6 9D01      		movw r18,r26
 587 01b8 AE01      		movw r20,r28
 588 01ba 0E94 0000 		call __mulsi3
 589 01be 3B01      		movw r6,r22
 590 01c0 4C01      		movw r8,r24
 155:/Users/Administrator/sos-2x/kernel/sos_info.c ****     dy2 = SQUARED(dy);
 592               	.LM26:
 593 01c2 C801      		movw r24,r16
 594 01c4 B701      		movw r22,r14
 595 01c6 A801      		movw r20,r16
 596 01c8 9701      		movw r18,r14
 597 01ca 0E94 0000 		call __mulsi3
 598 01ce 7B01      		movw r14,r22
 599 01d0 8C01      		movw r16,r24
 156:/Users/Administrator/sos-2x/kernel/sos_info.c ****     dz2 = SQUARED(dz);
 601               	.LM27:
 602 01d2 C601      		movw r24,r12
 603 01d4 B501      		movw r22,r10
 604 01d6 A601      		movw r20,r12
 605 01d8 9501      		movw r18,r10
 606 01da 0E94 0000 		call __mulsi3
 607 01de DC01      		movw r26,r24
 608 01e0 CB01      		movw r24,r22
 157:/Users/Administrator/sos-2x/kernel/sos_info.c ****     return dx2 + dy2 + dz2;
 610               	.LM28:
 611 01e2 6E0C      		add r6,r14
 612 01e4 7F1C      		adc r7,r15
 613 01e6 801E      		adc r8,r16
 614 01e8 911E      		adc r9,r17
 615 01ea 680E      		add r6,r24
 616 01ec 791E      		adc r7,r25
 617 01ee 8A1E      		adc r8,r26
 618 01f0 9B1E      		adc r9,r27
 619               	.L6:
 158:/Users/Administrator/sos-2x/kernel/sos_info.c **** }
 621               	.LM29:
 622 01f2 C401      		movw r24,r8
 623 01f4 B301      		movw r22,r6
 624               	/* epilogue: frame size=0 */
 625 01f6 DF91      		pop r29
 626 01f8 CF91      		pop r28
 627 01fa 1F91      		pop r17
 628 01fc 0F91      		pop r16
 629 01fe FF90      		pop r15
 630 0200 EF90      		pop r14
 631 0202 DF90      		pop r13
 632 0204 CF90      		pop r12
 633 0206 BF90      		pop r11
 634 0208 AF90      		pop r10
 635 020a 9F90      		pop r9
 636 020c 8F90      		pop r8
 637 020e 7F90      		pop r7
 638 0210 6F90      		pop r6
 639 0212 0895      		ret
 640               	/* epilogue end (size=15) */
 641               	/* function ker_loc_r2 size 204 (175) */
 650               	.Lscope5:
 653               	.global	ker_uart_id
 655               	ker_uart_id:
 159:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
 160:/Users/Administrator/sos-2x/kernel/sos_info.c **** uint16_t ker_uart_id()
 161:/Users/Administrator/sos-2x/kernel/sos_info.c **** {
 657               	.LM30:
 658               	/* prologue: frame size=0 */
 659               	/* prologue end (size=0) */
 162:/Users/Administrator/sos-2x/kernel/sos_info.c ****     return (uint16_t)UART_ADDRESS;
 163:/Users/Administrator/sos-2x/kernel/sos_info.c **** }
 661               	.LM31:
 662 0214 80E0      		ldi r24,lo8(-32768)
 663 0216 90E8      		ldi r25,hi8(-32768)
 664               	/* epilogue: frame size=0 */
 665 0218 0895      		ret
 666               	/* epilogue end (size=1) */
 667               	/* function ker_uart_id size 3 (2) */
 669               	.Lscope6:
 672               	.global	ker_i2c_id
 674               	ker_i2c_id:
 164:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
 165:/Users/Administrator/sos-2x/kernel/sos_info.c **** uint8_t ker_i2c_id()
 166:/Users/Administrator/sos-2x/kernel/sos_info.c **** {
 676               	.LM32:
 677               	/* prologue: frame size=0 */
 678               	/* prologue end (size=0) */
 167:/Users/Administrator/sos-2x/kernel/sos_info.c ****     return (uint8_t)I2C_ADDRESS;
 168:/Users/Administrator/sos-2x/kernel/sos_info.c **** }
 680               	.LM33:
 681 021a 82E0      		ldi r24,lo8(2)
 682 021c 90E0      		ldi r25,hi8(2)
 683               	/* epilogue: frame size=0 */
 684 021e 0895      		ret
 685               	/* epilogue end (size=1) */
 686               	/* function ker_i2c_id size 3 (2) */
 688               	.Lscope7:
 691               	.global	ker_hw_type
 693               	ker_hw_type:
 169:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
 170:/Users/Administrator/sos-2x/kernel/sos_info.c **** uint8_t ker_hw_type()
 171:/Users/Administrator/sos-2x/kernel/sos_info.c **** {
 695               	.LM34:
 696               	/* prologue: frame size=0 */
 697               	/* prologue end (size=0) */
 172:/Users/Administrator/sos-2x/kernel/sos_info.c ****     return hw_type;
 699               	.LM35:
 700 0220 8091 0000 		lds r24,hw_type
 173:/Users/Administrator/sos-2x/kernel/sos_info.c **** }
 702               	.LM36:
 703 0224 9927      		clr r25
 704               	/* epilogue: frame size=0 */
 705 0226 0895      		ret
 706               	/* epilogue end (size=1) */
 707               	/* function ker_hw_type size 4 (3) */
 709               	.Lscope8:
 712               	.global	ker_get_group
 714               	ker_get_group:
 174:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
 175:/Users/Administrator/sos-2x/kernel/sos_info.c **** uint8_t ker_get_group(void) 				{ return node_group_id; }
 716               	.LM37:
 717               	/* prologue: frame size=0 */
 718               	/* prologue end (size=0) */
 719 0228 8091 0000 		lds r24,node_group_id
 720 022c 9927      		clr r25
 721               	/* epilogue: frame size=0 */
 722 022e 0895      		ret
 723               	/* epilogue end (size=1) */
 724               	/* function ker_get_group size 4 (3) */
 726               	.Lscope9:
 730               	.global	ker_set_group
 732               	ker_set_group:
 176:/Users/Administrator/sos-2x/kernel/sos_info.c **** 
 177:/Users/Administrator/sos-2x/kernel/sos_info.c **** void ker_set_group(uint8_t new_group_id) 	{ node_group_id = new_group_id; }
 734               	.LM38:
 735               	/* prologue: frame size=0 */
 736               	/* prologue end (size=0) */
 737 0230 8093 0000 		sts node_group_id,r24
 738               	/* epilogue: frame size=0 */
 739 0234 0895      		ret
 740               	/* epilogue end (size=1) */
 741               	/* function ker_set_group size 3 (2) */
 743               	.Lscope10:
 750               		.text
 752               	Letext:
 753               	/* File "/Users/Administrator/sos-2x/kernel/sos_info.c": code  283 = 0x011b ( 224), prologues  24, 
DEFINED SYMBOLS
                            *ABS*:00000000 sos_info.c
                            *ABS*:0000003f __SREG__
                            *ABS*:0000003e __SP_H__
                            *ABS*:0000003d __SP_L__
                            *ABS*:00000000 __tmp_reg__
                            *ABS*:00000001 __zero_reg__
/var/tmp//cc9dmpX3.s:215    .data:00000000 hw_type
/var/tmp//cc9dmpX3.s:222    .bss:00000000 node_group_id
/var/tmp//cc9dmpX3.s:228    .data:00000001 node_address
/var/tmp//cc9dmpX3.s:233    .data:00000003 gps_loc
/var/tmp//cc9dmpX3.s:247    .data:0000000f node_loc
/var/tmp//cc9dmpX3.s:256    .text:00000000 id_init
/var/tmp//cc9dmpX3.s:276    .text:00000006 ker_set_id
/var/tmp//cc9dmpX3.s:295    .text:00000010 ker_id
/var/tmp//cc9dmpX3.s:314    .text:0000001a ker_loc
/var/tmp//cc9dmpX3.s:358    .text:0000005e ker_gps
/var/tmp//cc9dmpX3.s:393    .text:0000007c ker_loc_r2
/var/tmp//cc9dmpX3.s:655    .text:00000214 ker_uart_id
/var/tmp//cc9dmpX3.s:674    .text:0000021a ker_i2c_id
/var/tmp//cc9dmpX3.s:693    .text:00000220 ker_hw_type
/var/tmp//cc9dmpX3.s:714    .text:00000228 ker_get_group
/var/tmp//cc9dmpX3.s:732    .text:00000230 ker_set_group
/var/tmp//cc9dmpX3.s:752    .text:00000236 Letext

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
__mulsi3
